# rx/generic

    import _ "github.com/reactivego/rx/generic"

[![](https://godoc.org/github.com/reactivego/rx?status.png)](http://godoc.org/github.com/reactivego/rx/generic)

Package `rx/generic` provides Reactive Extensions for Go.
It's a generics library that consists of more than a 100 templates.
You can use it to write statically typed asynchronous and event-based programs using observables.
In order to use it, you will need to go get the [*jig*](https://github.com/reactivego/jig) tool.

## Using Generics

Using the library is very simple. Just import the library with the blank identifier `_`.

```go
import _ "github.com/reactivego/rx/generic"
```
The import is purely done so the *jig* tool can detect all the generics that are part of the library.

Note, although the path to the generic package is `rx/generic` the actual package name is not `generic` but `rx`. Code generated by *jig* is written to the file `rx.go` by default. 

The following is a minimal *Hello, World!* program saved as file `main.go`:

```go
package main

import _ "github.com/reactivego/rx/generic"

func main() {
	JustString("Hello, World!").Println()

	// Output: Hello, World!
}
```
This code will not build, because `JustString` is undefined. `Just` is referring to the generic function with that name. The `String` part indicates we want to use it with values of type `string`. Below is the generic definition from the library:

```go
//jig:template Just<Foo>
//jig:needs Observable<Foo>

// JustFoo creates an ObservableFoo that emits a particular item.
func JustFoo(element foo) ObservableFoo {
	// snip...
}
```
Run *jig* to generate code into file `rx.go`.

```bash
$ go run github.com/reactivego/jig -v
found 16 templates in package "multicast" (github.com/reactivego/multicast/generic)
found 126 templates in package "rx" (github.com/reactivego/rx/generic)
generating "JustString"
  Scheduler
  Subscriber
  StringObserver
  ObservableString
  JustString
generating "ObservableString Println"
  Schedulers
  ObservableString Println
writing file "rx.go"

```

Run the program

```bash
$ go run main.go rx.go 
Hello, World!
```
The *jig* tool genererated the `rx.go` file, that contains the following code:

```go
// Code generated by jig; DO NOT EDIT.

//go:generate jig

package main

import (
	"fmt"

	"github.com/reactivego/scheduler"
	"github.com/reactivego/subscriber"
)

type Scheduler = scheduler.Scheduler
type Subscriber = subscriber.Subscriber

type StringObserver func(next string, err error, done bool)

type ObservableString func(StringObserver, Scheduler, Subscriber)

func JustString(element string) ObservableString {
	var zeroString string
	observable := func(observe StringObserver, scheduler Scheduler, subscriber Subscriber) {
		runner := scheduler.Schedule(func() {
			if subscriber.Subscribed() {
				observe(element, nil, false)
			}
			if subscriber.Subscribed() {
				observe(zeroString, nil, true)
			}
		})
		subscriber.OnUnsubscribe(runner.Cancel)
	}
	return observable
}

func (o ObservableString) Println() (err error) {
	subscriber := subscriber.New()
	scheduler := scheduler.Trampoline
	observer := func(next string, e error, done bool) {
		if !done {
			fmt.Println(next)
		} else {
			err = e
			subscriber.Unsubscribe()
		}
	}
	subscriber.OnWait(scheduler.Wait)
	o(observer, scheduler, subscriber)
	subscriber.Wait()
	return
}
```
Reactive Extensions are built around two function types `Observer` and `Observable`:

```go
type StringObserver func(next string, err error, done bool)

type ObservableString func(StringObserver, Scheduler, Subscriber)
```

For an overview of all implemented operators, see [https://github.com/reactivego/rx](https://github.com/reactivego/rx#operators)